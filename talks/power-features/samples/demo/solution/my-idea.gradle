apply plugin: 'idea'

def myIdea = project.extensions.create('myIdea', MyIdea)

idea.project {
  languageLevel = '1.5'
  ipr.withXml { xmlProvider ->
    def vcsConfig = xmlProvider.asNode().component.find { it.'@name' == 'VcsDirectoryMappings' }
    vcsConfig.mapping[0].'@vcs' = myIdea.vcs
  }
}

class MyIdea {
  String vcs = 'svn'
}