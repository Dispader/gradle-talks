import com.eriwen.gradle.js.tasks.*

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.eriwen:gradle-js-plugin:0.4.1'
    }
}

apply plugin: 'js'

def jsSource = fileTree("js") { include "*.js" }
def jsBundled = file("$buildDir/all.js")
def jsMinified = file("$buildDir/all-min.js")

task combinejs(type: CombineJsTask) {
    source = jsSource.files*.absolutePath
    dest = jsBundled
}

task minifyjs(type: MinifyJsTask, dependsOn: 'combinejs') {
    source = jsBundled
    dest = jsMinified
    warningLevel = 'QUIET'
}

task gzipjs(type: GzipJsTask, dependsOn: 'minifyjs') {
    source = jsMinified
    dest = file("${jsMinified}.gzip")
}