apply plugin: 'cpp'

libraries {
    greeting {
        binaries.withType(SharedLibraryBinary) {
            cppCompiler.define 'DLL_EXPORT'
        }
    }
}

sources {
    helloWorld {
        cpp {
            lib libraries.greeting
        }
    }
}

executables {
    helloWorld
}

binaries.withType(NativeBinary) {
    if (toolChain in VisualCpp) {
        cppCompiler.args '/Zi', '/RTC1'
        linker.args '/DEBUG'
    } else {
        cppCompiler.args '-g'
    }
}
